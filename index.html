<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Hiragana ‚Üí Romaji Word Quiz</title>

<style>
body {
  font-family:"Hiragino Kaku Gothic Pro","Meiryo",sans-serif;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:40px;
  color:#333;
  text-align:center;
}
h1 {color:#b23b3b;font-size:2em;margin-bottom:20px;}
button {
  font-size:18px;
  padding:12px 24px;
  margin:10px;
  border-radius:12px;
  cursor:pointer;
  transition:.3s;
}
#playSound {
  background:white;
  color:#b23b3b;
  border:3px solid #b23b3b;
}
#playSound:hover {background:#ffe6f2;}
.choice {
  background:#b23b3b;
  color:white;
  border:2px solid #b23b3b;
}
.choice:hover {background:#ff4da6;}
#choices {
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  max-width:720px;
}
#result {
  font-size:20px;
  margin-top:20px;
  font-weight:bold;
  white-space:pre-line;
}
#retry {
  display:none;
  background:#b23b3b;
  color:white;
  border:2px solid #b23b3b;
}
#retry:hover {background:#ff4da6;}
</style>
</head>

<body>

<h1>üéß Hiragana ‚Üí Romaji Word Quiz</h1>

<button id="playSound">‚ñ∂Ô∏è Play Sound</button>
<div id="choices"></div>
<div id="result"></div>
<button id="retry">üîÑ Retry Quiz</button>

<script>
/* ================= AUDIO BASE PATH ================= */
const AUDIO_BASE =
"https://raw.githubusercontent.com/k58835032-notbot/lesson-11-quiz-7/main/audio/";

/* ================= WORD LIST ================= */
const words = [
{jp:"„Å®„Çâ", romaji:"tora", meaning:"lion"},
  {jp:"„Çâ„Å£„Å±", romaji:"rappa", meaning:"trumpet"},
  {jp:"„Çâ„Åè", romaji:"raku", meaning:"easy"},
  {jp:"„Çâ„Åè„Åå„Åç", romaji:"rakugaki", meaning:"doodle"},
  {jp:"„Çâ„ÅÑ„Å≠„Çì", romaji:"rainen", meaning:"next year"},
  {jp:"„Çâ„ÅÑ„Å®", romaji:"raito", meaning:"light"},
  {jp:"„Çä„Çì„Åî", romaji:"ringo", meaning:"apple"},
  {jp:"„Çä„Åô", romaji:"risu", meaning:"squirrel"},
  {jp:"„Çä„ÇÜ„ÅÜ", romaji:"riyuu", meaning:"reason"},
  {jp:"„Çä„Çá„Åì„ÅÜ", romaji:"ryokou", meaning:"travel"},
  {jp:"„Çä„Åã„ÅÑ", romaji:"rikai", meaning:"understanding"},
  {jp:"„Çä„Çá„ÅÜ", romaji:"ryou", meaning:"dormitory / quantity"},
  {jp:"„Åø„Çä„Çá„Åè", romaji:"miryoku", meaning:"appeal"},
  {jp:"„Çã„Åô", romaji:"rusu", meaning:"absence"},
  {jp:"„Åó„ÇÖ„Çã„ÅÑ", romaji:"shurui", meaning:"kind / type"},
  {jp:"„Çã„Åô„Å∞„Çì", romaji:"rusuban", meaning:"house-sitting"},
  {jp:"„Çã„Çç„ÅÜ", romaji:"rurou", meaning:"wandering"},
  {jp:"„Çå„ÅÑ", romaji:"rei", meaning:"example / zero"},
  {jp:"„Çå„ÇÇ„Çì", romaji:"remon", meaning:"lemon"},
  {jp:"„Çå„Åç„Åó", romaji:"rekishi", meaning:"history"},
  {jp:"„Çå„ÅÑ„Åû„ÅÜ„Åì", romaji:"reizoko", meaning:"refrigerator"},
  {jp:"„Çå„Çì„Åó„ÇÖ„ÅÜ", romaji:"renshuu", meaning:"practice"},
  {jp:"„Åé„Çá„ÅÜ„Çå„Å§", romaji:"gyouretsu", meaning:"row / line"},
  {jp:"„Çç„Åè", romaji:"roku", meaning:"six"},
  {jp:"„Çç„Å∞", romaji:"roba", meaning:"donkey"},
  {jp:"„Çç„ÅÜ„Åù„Åè", romaji:"rousoku", meaning:"candle"},
  {jp:"„Çç„ÅÜ„Åã", romaji:"rouka", meaning:"corridor"},
  {jp:"„Çç„Åè„Åä„Çì", romaji:"rokuon", meaning:"recording"},
  {jp:"„Çç„Åò", romaji:"roji", meaning:"alley"},
  {jp:"„Åï„Åè„Çâ", romaji:"sakura", meaning:"cherry blossom"},
  {jp:"„Åù„Çâ", romaji:"sora", meaning:"sky"},
  {jp:"„Åè„Çâ„ÅÑ", romaji:"kurai", meaning:"dark"},
  {jp:"„ÅÇ„Åã„Çã„ÅÑ", romaji:"akarui", meaning:"bright"},
  {jp:"„ÅÇ„Çâ„Åó", romaji:"arashi", meaning:"storm"},
  {jp:"„Åã„Çâ„Å¶", romaji:"karate", meaning:"karate"},
  {jp:"„ÇÄ„Çâ", romaji:"mura", meaning:"village"},
  {jp:"„Å¶„Çâ", romaji:"tera", meaning:"temple"},
  {jp:"„ÅØ„Çâ", romaji:"hara", meaning:"belly / field"},
  {jp:"„Åã„Çå", romaji:"kare", meaning:"him"},
  {jp:"„Åè„Å§„Çç„Åí„Çã", romaji:"kutsurogeru", meaning:"to relax"},
  {jp:"„Çç„Çì„Çä", romaji:"ronri", meaning:"theory"},
  {jp:"„Åï„Çã", romaji:"saru", meaning:"monkey"},
  {jp:"„Åæ„Å§„Çä", romaji:"matsuri", meaning:"festival"},
  {jp:"„Çä„ÇÇ„Åì„Çì", romaji:"rimokon", meaning:"remote control"},
  {jp:"„Åï„Çâ", romaji:"sara", meaning:"plate"},
  {jp:"„Å≤„Çâ„Åå„Å™", romaji:"hiragana", meaning:"hiragana"},
  {jp:"„Å™„Åä„Çã", romaji:"naoru", meaning:"to fix, to get better"}
];

/* ================= DISTRACTORS ================= */
const kanaPool = ["„ÅÇ","„ÅÑ","„ÅÜ","„Åà","„Åä","„Çâ","„Çä","„Çã","„Çå","„Çç","„Å§","„Å£"];

function randomKana(){
  return kanaPool[Math.floor(Math.random()*kanaPool.length)];
}

function generateDistractors(correct){
  const set = new Set();
  while(set.size < 3){
    let v = correct;
    const i = Math.floor(Math.random()*v.length);
    v = v.slice(0,i) + randomKana() + v.slice(i+1);
    if(v !== correct) set.add(v);
  }
  return [...set];
}

/* ================= QUIZ LOGIC ================= */
let currentWord;
let score = 0;
let count = 0;
const maxQuestions = 25;

const choicesDiv = document.getElementById("choices");
const resultEl = document.getElementById("result");
const retryBtn = document.getElementById("retry");
const playSoundBtn = document.getElementById("playSound");

let audio = new Audio();

function playCurrentSound(){
  if(!currentWord) return;
  audio.src = AUDIO_BASE + currentWord.romaji + ".mp3";
  audio.currentTime = 0;
  audio.play().catch(()=>alert("Audio file not found"));
}

function newQuestion(){
  if(count >= maxQuestions) return endQuiz();
  count++;

  currentWord = words[Math.floor(Math.random()*words.length)];
  choicesDiv.innerHTML = "";

  const options = [...generateDistractors(currentWord.jp), currentWord.jp]
    .sort(()=>Math.random()-0.5);

  options.forEach(opt=>{
    const btn = document.createElement("button");
    btn.className="choice";
    btn.textContent=opt;
    btn.onclick=()=>checkAnswer(opt);
    choicesDiv.appendChild(btn);
  });

  resultEl.textContent = `Q ${count} / ${maxQuestions}`;
}

function checkAnswer(ans){
  if(ans === currentWord.jp){
    score++;
    resultEl.textContent =
`‚≠ï Correct!
${currentWord.jp} ‚Äî ${currentWord.romaji}
Meaning: ${currentWord.meaning}`;
  } else {
    resultEl.textContent =
`‚ùå Wrong!
Correct: ${currentWord.jp}
${currentWord.romaji}
Meaning: ${currentWord.meaning}`;
  }
  setTimeout(newQuestion, 1500);
}

function endQuiz(){
  choicesDiv.innerHTML="";
  resultEl.textContent = `üéâ Finished!\nScore: ${score} / ${maxQuestions}`;
  retryBtn.style.display="block";
}

function resetQuiz(){
  score=0;
  count=0;
  retryBtn.style.display="none";
  newQuestion();
}

playSoundBtn.onclick = playCurrentSound;
retryBtn.onclick = resetQuiz;
newQuestion();
</script>
</body>
</html>

